<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>由 Java 引谈到 TypeScript | Iamasoldier6&#39;s Column</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。

近来，接触到动态化 UI 框架应用到 Android 中的混合开发，使用的是微软的 TypeScript 语言。作为使用面向对象语言 Java 的 Android 开发者，会发现两者有很多相似的地方。借此机会，将 Java 和 TypeScript 作一个简单的比较，以归纳总结 TypeScript 简单的通常用法。">
<meta property="og:type" content="article">
<meta property="og:title" content="由 Java 引谈到 TypeScript">
<meta property="og:url" content="http://iamasoldier6.com/2018/01/27/由-Java-引谈到-TypeScript/index.html">
<meta property="og:site_name" content="Iamasoldier6's Column">
<meta property="og:description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。

近来，接触到动态化 UI 框架应用到 Android 中的混合开发，使用的是微软的 TypeScript 语言。作为使用面向对象语言 Java 的 Android 开发者，会发现两者有很多相似的地方。借此机会，将 Java 和 TypeScript 作一个简单的比较，以归纳总结 TypeScript 简单的通常用法。">
<meta property="og:image" content="http://7xt0ac.com1.z0.glb.clouddn.com/wx_qrcode.jpg">
<meta property="og:updated_time" content="2018-01-27T05:22:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="由 Java 引谈到 TypeScript">
<meta name="twitter:description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。

近来，接触到动态化 UI 框架应用到 Android 中的混合开发，使用的是微软的 TypeScript 语言。作为使用面向对象语言 Java 的 Android 开发者，会发现两者有很多相似的地方。借此机会，将 Java 和 TypeScript 作一个简单的比较，以归纳总结 TypeScript 简单的通常用法。">
<meta name="twitter:image" content="http://7xt0ac.com1.z0.glb.clouddn.com/wx_qrcode.jpg">
  
    <link rel="alternative" href="/atom.xml" title="Iamasoldier6&#39;s Column" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon2.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xt0ac.com1.z0.glb.clouddn.com/cavs23.png" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Iamasoldier6</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Forged from suffering, hardened by pain.</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Iamasoldier6" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2253797763/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/Iamasoldier6" title="zhihu">zhihu</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/Iamasoldier6" title="twitter">twitter</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/AOSP/" style="font-size: 10px;">AOSP</a> <a href="/tags/Activity/" style="font-size: 11.43px;">Activity</a> <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Annotation/" style="font-size: 10px;">Annotation</a> <a href="/tags/Annual/" style="font-size: 11.43px;">Annual</a> <a href="/tags/Application/" style="font-size: 10px;">Application</a> <a href="/tags/Bundle/" style="font-size: 10px;">Bundle</a> <a href="/tags/Callback/" style="font-size: 10px;">Callback</a> <a href="/tags/Concurrency/" style="font-size: 12.86px;">Concurrency</a> <a href="/tags/Context/" style="font-size: 10px;">Context</a> <a href="/tags/Debug/" style="font-size: 10px;">Debug</a> <a href="/tags/DialogFragment/" style="font-size: 10px;">DialogFragment</a> <a href="/tags/Event/" style="font-size: 11.43px;">Event</a> <a href="/tags/EventBus/" style="font-size: 11.43px;">EventBus</a> <a href="/tags/Fragment/" style="font-size: 11.43px;">Fragment</a> <a href="/tags/Framework/" style="font-size: 10px;">Framework</a> <a href="/tags/Generics/" style="font-size: 10px;">Generics</a> <a href="/tags/HTML/" style="font-size: 10px;">HTML</a> <a href="/tags/Handler/" style="font-size: 10px;">Handler</a> <a href="/tags/HashMap/" style="font-size: 11.43px;">HashMap</a> <a href="/tags/I-O/" style="font-size: 10px;">I/O</a> <a href="/tags/Image/" style="font-size: 12.86px;">Image</a> <a href="/tags/Java/" style="font-size: 17.14px;">Java</a> <a href="/tags/JavaScript/" style="font-size: 10px;">JavaScript</a> <a href="/tags/Launch/" style="font-size: 10px;">Launch</a> <a href="/tags/ListView/" style="font-size: 10px;">ListView</a> <a href="/tags/Mac/" style="font-size: 12.86px;">Mac</a> <a href="/tags/Message/" style="font-size: 10px;">Message</a> <a href="/tags/Pattern/" style="font-size: 11.43px;">Pattern</a> <a href="/tags/Performance/" style="font-size: 11.43px;">Performance</a> <a href="/tags/React-Native/" style="font-size: 10px;">React Native</a> <a href="/tags/RecyclerView/" style="font-size: 15.71px;">RecyclerView</a> <a href="/tags/Reflection/" style="font-size: 10px;">Reflection</a> <a href="/tags/Source-Code/" style="font-size: 18.57px;">Source Code</a> <a href="/tags/Summary/" style="font-size: 11.43px;">Summary</a> <a href="/tags/Text/" style="font-size: 10px;">Text</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a> <a href="/tags/Unit-Test/" style="font-size: 10px;">Unit Test</a> <a href="/tags/View/" style="font-size: 11.43px;">View</a> <a href="/tags/Volley/" style="font-size: 14.29px;">Volley</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Iamasoldier6</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://7xt0ac.com1.z0.glb.clouddn.com/cavs23.png" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Iamasoldier6</h1>
			</hgroup>
			
			<p class="header-subtitle">Forged from suffering, hardened by pain.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Iamasoldier6" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2253797763/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/Iamasoldier6" title="zhihu">zhihu</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/Iamasoldier6" title="twitter">twitter</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-由-Java-引谈到-TypeScript" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2018/01/27/由-Java-引谈到-TypeScript/" class="article-date">
  	<time datetime="2018-01-27T05:09:43.000Z" itemprop="datePublished">2018-01-27</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      由 Java 引谈到 TypeScript
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TypeScript/">TypeScript</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#简介-TypeScript"><span class="toc-number">1.</span> <span class="toc-text">简介 TypeScript</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#上手-TypeScript"><span class="toc-number">2.</span> <span class="toc-text">上手 TypeScript</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#基础类型"><span class="toc-number">2.1.</span> <span class="toc-text">基础类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#变量声明"><span class="toc-number">2.2.</span> <span class="toc-text">变量声明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#接口"><span class="toc-number">2.3.</span> <span class="toc-text">接口</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类"><span class="toc-number">2.4.</span> <span class="toc-text">类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数"><span class="toc-number">2.5.</span> <span class="toc-text">函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#泛型"><span class="toc-number">2.6.</span> <span class="toc-text">泛型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文献"><span class="toc-number">3.</span> <span class="toc-text">参考文献</span></a></li></ol>
  </div>

        <blockquote>
<p>天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
</blockquote>
<p>近来，接触到动态化 UI 框架应用到 Android 中的混合开发，使用的是微软的 TypeScript 语言。作为使用面向对象语言 Java 的 Android 开发者，会发现两者有很多相似的地方。借此机会，将 Java 和 TypeScript 作一个简单的比较，以归纳总结 TypeScript 简单的通常用法。<a id="more"></a></p>
<h2 id="简介-TypeScript"><a href="#简介-TypeScript" class="headerlink" title="简介 TypeScript"></a><strong>简介 TypeScript</strong></h2><p>Java 自不必多说，重点看一下 TypeScript，先看官网的<a href="http://www.typescriptlang.org" target="_blank" rel="external">简介</a>。</p>
<p>“TypeScript is a typed superset of JavaScript that compiles to plain JavaScript. Any browser. Any host. Any OS. Open source.”</p>
<p>大意即 TypeScript 是 JavaScript 类型的超集，其可以编译成纯的 JavaScript，能运行在任何浏览器上。TypeScript 是开源的，可以运行在任何服务器和系统上。</p>
<p>TypeScript 对于我们 Java 开发者来说，上手前端开发十分顺滑：</p>
<ul>
<li>代码的可读性和可维护性很好</li>
<li>代码编译阶段就可以发现大部分的错误</li>
<li>增强了编辑器和 IDE 的功能，如代码补全、跳转到定义等</li>
</ul>
<h2 id="上手-TypeScript"><a href="#上手-TypeScript" class="headerlink" title="上手 TypeScript"></a><strong>上手 TypeScript</strong></h2><p>配备好 Node 环境后，TypeScript 安装如下：</p>
<figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm <span class="keyword">install</span> -g typescript</span><br></pre></td></tr></table></figure>
<p>编译时执行，</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tsc</span> <span class="selector-tag">helloworld</span><span class="selector-class">.ts</span></span><br></pre></td></tr></table></figure>
<p>事实上，主流编辑器都支持 TypeScript，这里推荐 <a href="https://code.visualstudio.com" target="_blank" rel="external">Visual Studio Code</a>，其内置了 TypeScript 的支持，是一款开源、跨终端的轻量级编辑器。其他诸如 Sublime Text、Atom 等，看开发者的喜好了。</p>
<p>先从 Hello World 开始，新建一个 hello.ts 文件：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello, '</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> master = <span class="string">'World'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sayHello(master));</span><br></pre></td></tr></table></figure>
<p>保存后，终端进入文件所在目录，执行</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">tsc</span> <span class="selector-tag">hello</span><span class="selector-class">.ts</span></span><br></pre></td></tr></table></figure>
<p>会生成一个编译好的 JavaScript 文件 hello.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'Hello, '</span> + name;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> master = <span class="string">'World'</span>;</span><br><span class="line"><span class="built_in">console</span>.log(sayHello(master));</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>，TypeScript 只进行静态检查，若发现错误，编译期会报错，但还是会生成 JS 文件。不过，TypeScript 会警告代码不会按预期执行。</p>
<p>好，接下来，全面对照 Java，总结 TypeScript 简单的特性和常见使用。</p>
<h3 id="基础类型"><a href="#基础类型" class="headerlink" title="基础类型"></a><strong>基础类型</strong></h3><p><strong><em>布尔值</em></strong></p>
<p><code>Java</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">boolean</span> isDone = <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure>
<p><code>TypeScript</code>中：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> isDone: <span class="built_in">boolean</span> = <span class="literal">false</span>;</span><br></pre></td></tr></table></figure>
<p><strong><em>数字类型</em></strong></p>
<p><code>Java</code>中有 6 种基本数字类型，4 个整数类型：byte、short、int 和 long，2 个浮点类型：float 和 double：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">float</span> num = <span class="number">1.0f</span>;</span><br></pre></td></tr></table></figure>
<p><code>TypeScript</code>中<strong>所有的数字都是浮点数</strong>，类型为 number：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> num: <span class="built_in">number</span> = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<p><strong><em>字符串</em></strong></p>
<p><code>Java</code>中，关键字 String 是大写：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String name = <span class="string">"zebron"</span>;</span><br></pre></td></tr></table></figure>
<p><code>TypeScript</code>中，关键字 string 是小写：</p>
<p>双引号形式，</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: <span class="built_in">string</span> = <span class="string">"zebron"</span>;</span><br></pre></td></tr></table></figure>
<p>或单引号形式，</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name: <span class="built_in">string</span> = <span class="string">'zebron'</span>;</span><br></pre></td></tr></table></figure>
<p>还可以使用<strong>模版字符串</strong>，定义多行文本和内嵌表达式，以反引号包围，同时，以<code>${ expr }</code>形式嵌入表达式：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sentence: <span class="built_in">string</span> = <span class="string">`Hello, my name is <span class="subst">$&#123; name &#125;</span>`</span>;</span><br></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> sentence: <span class="built_in">string</span> = <span class="string">"Hello, my name is "</span> + name;</span><br></pre></td></tr></table></figure>
<p><strong><em>数组</em></strong></p>
<p><code>Java</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span>[] list = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;;</span><br></pre></td></tr></table></figure>
<p><code>TypeScript</code>中：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p>或使用数组泛型，</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: <span class="built_in">Array</span>&lt;<span class="built_in">number</span>&gt; = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br></pre></td></tr></table></figure>
<p><strong><em>元组</em></strong></p>
<p><code>Java</code>中没有内置的元组，使用的也不多。</p>
<p><code>TypeScript</code>中，元组类型允许表示一个已知元素数量和类型的数组，且各个元素的类型不必相同，如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 声明一个有着 string 和 number 类型一对值的元组</span></span><br><span class="line"><span class="keyword">let</span> x: [<span class="built_in">string</span>, <span class="built_in">number</span>];</span><br><span class="line"><span class="comment">// 正确的初始化方式</span></span><br><span class="line">x = [<span class="string">'zebron'</span>, <span class="number">6</span>];</span><br><span class="line"><span class="comment">// 错误的初始化方式</span></span><br><span class="line">x = [<span class="number">6</span>, <span class="string">'zebron'</span>];</span><br></pre></td></tr></table></figure>
<p><strong><em>枚举</em></strong></p>
<p><code>Java</code>和<code>TypeScript</code>枚举的用法几乎一致。</p>
<p><strong>接下来，着重讲解几个 Java 中没有，且 TypeScript 中存在，甚至常用的类型</strong>。</p>
<p><strong><em>Any</em></strong></p>
<p>编程阶段不清楚变量的类型时，如值来自动态的内容，可能是用户输入或者第三方的代码库时，要指定其类型，且不想让类型检查器对这些值进行检查，而是直接让它们通过编译阶段的检查，可以用<code>any</code>类型标记变量：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo: <span class="built_in">any</span> = <span class="number">6</span>;</span><br><span class="line">foo = <span class="string">"zebron"</span>; <span class="comment">// 正确</span></span><br><span class="line">foo = <span class="literal">false</span>; <span class="comment">// 正确</span></span><br></pre></td></tr></table></figure>
<p>对现有代码进行改写时，<code>any</code>允许在编译时可选择地包含或移除类型检查。<strong>注意和 Object 的差异</strong>！</p>
<p>Object 类型的变量只是允许给其赋任意值，但是不能使其可以调用任意的方法，即使是有！</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo: <span class="built_in">any</span> = <span class="number">6</span>;</span><br><span class="line">foo.existedFunction(); <span class="comment">// 正确，existedFunction() 也许是运行时存在的</span></span><br><span class="line">foo.toFixed(); <span class="comment">// 正确，toFixed() 存在的但编译器没有检查</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> bar: <span class="built_in">Object</span> = <span class="number">6</span>;</span><br><span class="line">bar.toFixed(); <span class="comment">// Object 里没有该方法时，这样调用或许是错误的</span></span><br></pre></td></tr></table></figure>
<p>此外，只知道一部分数据的类型时，any 类型也有用，如：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list: <span class="built_in">any</span>[] = [<span class="number">6</span>, <span class="literal">true</span>, <span class="string">"zebron"</span>];</span><br><span class="line">list[<span class="number">1</span>] = <span class="number">100</span>;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>，变量在声明时，未指定其类型，会被识别为任意值<code>any</code>类型，即</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value;</span><br></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> value: <span class="built_in">any</span>;</span><br></pre></td></tr></table></figure>
<p><strong><em>Undefined</em></strong></p>
<p>undefined 有自己的类型叫做 undefined，其本身的类型用处不是很大：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> u: <span class="literal">undefined</span> = <span class="literal">undefined</span>;</span><br></pre></td></tr></table></figure>
<p>默认情况下，undefined 是所有类型的子类型。</p>
<p><strong><em>Never</em></strong></p>
<p>never 类型表示的是那些永不存在的值类型。</p>
<ul>
<li>never 类型可以是会抛出异常，或不会有返回值的表达式的返回值类型</li>
<li>变量可能是 never 类型，其被永不为真的类型保护所约束时</li>
<li>never 类型是任何类型的子类型，可以赋值给任何类型</li>
<li>never 类型自身没有子类型，除了 never 其自身，且没有值可以赋值给 never 类型，<strong>any 也不可以赋值给 never</strong></li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(message);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>类型断言</em></strong></p>
<p>清楚地知道一个实体具有比其现有类型更确切的类型时，可以使用类型断言。</p>
<p>类型断言类似 Java 里的类型转换，但是<strong>不进行特殊的数据检查和解构</strong>，没有运行时的影响，只在编译阶段起作用。有两种形式：</p>
<p>“尖括号”式</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo: <span class="built_in">any</span> = <span class="string">"I am zebron"</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (&lt;<span class="built_in">string</span>&gt;foo).length;</span><br></pre></td></tr></table></figure>
<p>as 式</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> foo: <span class="built_in">any</span> = <span class="string">"I am zebron"</span>;</span><br><span class="line"><span class="keyword">let</span> strLength: <span class="built_in">number</span> = (foo as <span class="built_in">string</span>).length;</span><br></pre></td></tr></table></figure>
<h3 id="变量声明"><a href="#变量声明" class="headerlink" title="变量声明"></a><strong>变量声明</strong></h3><p><code>let</code>和<code>const</code>是 TypeScript 里变量的声明方式，<code>const</code>是对<code>let</code>的一个增强，能阻止对一个变量再次赋值，也就是<code>const</code>声明的变量有常量的意思。</p>
<p>关于<strong>以 let 代替 var 的原因</strong>，参见<a href="http://www.typescriptlang.org/docs/handbook/variable-declarations.html" target="_blank" rel="external">官方文档</a>。</p>
<p><code>const</code>与<code>let</code>有着相同的作用域规则，但是正如前文所说，其引用的值是不可变的。</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> programmer = &#123;</span><br><span class="line">    name: <span class="string">"zebron"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 错误</span></span><br><span class="line">programmer = &#123;</span><br><span class="line">    name: <span class="string">"soldier"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 正确</span></span><br><span class="line">programmer.name = <span class="string">"bob"</span>;</span><br></pre></td></tr></table></figure>
<p>事实上，<code>const</code>变量的内部状态是可以修改的。</p>
<p><strong>总结用法</strong>，除了计划去修改的变量，即不需要对一个变量写入时，都应该使用<code>const</code>。</p>
<p>此外，关于<strong>解构</strong>，参见<a href="https://www.tslang.cn/docs/handbook/variable-declarations.html" target="_blank" rel="external">官方文档</a>。</p>
<h3 id="接口"><a href="#接口" class="headerlink" title="接口"></a><strong>接口</strong></h3><p><code>Java</code>中：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">ClockIf</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setTime</span><span class="params">(Date d)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span> <span class="keyword">implements</span> <span class="title">ClockIf</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setTime</span><span class="params">(Date d)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>TypeScript</code>中：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ClockIf &#123;</span><br><span class="line">    setTime(d: <span class="built_in">Date</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> Clock <span class="keyword">implements</span> ClockIf &#123;</span><br><span class="line">    setTime(d: <span class="built_in">Date</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>TypeScript 中，类实现接口、接口继承接口等，与 Java 中的差不多。现着重看看 TypeScript 中特殊的地方。</p>
<p><strong><em>可选属性</em></strong></p>
<p>接口里的属性并不是全都必需的，有些某些条件下存在，或者根本就不存在，可以给函数传入的参数对象中只有部分属性赋值。示例如下：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> SquareConfig &#123;</span><br><span class="line">    color?: <span class="built_in">string</span>;</span><br><span class="line">    width?: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createSquare</span>(<span class="params">config: SquareConfig</span>): </span>&#123;color: <span class="built_in">string</span>; area: <span class="built_in">number</span>&#125; &#123;</span><br><span class="line">    <span class="keyword">let</span> newSquare = &#123;color: <span class="string">"red"</span>, area: <span class="number">66</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (config.color) &#123;</span><br><span class="line">        newSquare.color = config.color;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (config.width) &#123;</span><br><span class="line">        newSquare.area = config.width * config.width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> newSquare;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> createdSquare = createSquare(&#123;color: <span class="string">"black"</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>这种接口，会在可选属性名字定义的后面加一个<code>?</code>符号，其好处：</p>
<ul>
<li>对可能存在的属性进行预定义</li>
<li>引用不存在的属性时，可以捕获错误</li>
</ul>
<p><strong><em>只读属性</em></strong></p>
<p>为了让某些对象属性只在对象刚刚创建的时候修改它的值，可以在属性名前加<code>readonly</code>指定其只读属性：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Rectangle &#123;</span><br><span class="line">    readonly length: <span class="built_in">number</span>;</span><br><span class="line">    readonly width: <span class="built_in">number</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始赋值</span></span><br><span class="line"><span class="keyword">let</span> rec: Rectangle = &#123;length: <span class="number">10</span>, width: <span class="number">20</span>&#125;;</span><br><span class="line">rec.length = <span class="number">5</span>; <span class="comment">// 错误</span></span><br></pre></td></tr></table></figure>
<p>TypeScript 还具有个<code>ReadonlyArray&lt;T&gt;</code>的类型，与<code>Array&lt;T&gt;</code>类似，其<strong>只是把所有可变的方法去掉了，确保数组创建后再也不能被修改</strong>：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> myArray: <span class="built_in">number</span>[] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> ra: ReadonlyArray&lt;<span class="built_in">number</span>&gt; = myArray;</span><br><span class="line">ra[<span class="number">0</span>] = <span class="number">6</span>; <span class="comment">// 错误</span></span><br><span class="line">ra.push(<span class="number">5</span>); <span class="comment">// 错误</span></span><br><span class="line">ra.length = <span class="number">66</span>; <span class="comment">// 错误</span></span><br><span class="line">myArray = ra; <span class="comment">// 错误</span></span><br><span class="line">myArray = ra as <span class="built_in">number</span>[]; <span class="comment">// 使用类型断言, 正确</span></span><br></pre></td></tr></table></figure>
<p>那么问题来了，readonly 和 const 十分相似，该怎么用？<strong>作为变量的话使用 const，作为属性的话使用 readonly</strong>。</p>
<h3 id="类"><a href="#类" class="headerlink" title="类"></a><strong>类</strong></h3><p>TypeScript 里的类和 Java 中的类也大体相似，说说其不同点。</p>
<p>首先，上文接口中提到的，TypeScript 的类中也有<code>readonly</code>属性。</p>
<p>使用<code>readonly</code>将属性设置为可读的。<strong>注意</strong>，只读属性必须在声明时或构造器里被初始化。</p>
<p><strong><em>存取器</em></strong></p>
<p>TypeScript 里支持通过<code>getters / setters</code>有效地控制对对象成员的访问。不过，<strong>要注意的是</strong>，只带有<code>get</code>不带有<code>set</code>的存取器自动被推断为<code>readonly</code>。</p>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a><strong>函数</strong></h3><p>几乎和 Java 中的方法特性类似。不过要注意的是，如前文提到的，TypeScript 里可以在参数名旁边使用<code>?</code>实现可选参数的功能。</p>
<h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a><strong>泛型</strong></h3><p>几乎和 Java 中的泛型特性一致。</p>
<p>TypeScript 中，使用<code>any</code>类型会导致这个函数可以接受任何类型的 arg 参数，造成容易丢失一些信息：传入的类型与返回的类型应该是相同的。但是，使用<code>any</code>时，我们传入一个数字，任何类型的参数都可能会被返回。</p>
<p>所以，这里引入类型变量即泛型，解决了返回值的类型与传入参数的类型是相同的。</p>
<p>至此，对照 Java，引谈的 TypeScript 简单常用特性叙述到此结束，更多进阶细节及高级用法，参见<a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="external">官方文档</a>。</p>
<p><strong><em>本人才疏学浅，如有疏漏错误之处，望读者中有识之士不吝赐教，谢谢。</em></strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Email: iamasoldiersix@gmail.com / WeChat: Wolverine623</span><br></pre></td></tr></table></figure>
<p><strong><em>您也可以关注我个人的微信公众号</em></strong> <strong><em>AndroidEngineer</em></strong>，<strong><em>第一时间获得博客的更新通知，或后台留言与我交流</em></strong>。</p>
<p><img src="http://7xt0ac.com1.z0.glb.clouddn.com/wx_qrcode.jpg" alt=""></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a><strong>参考文献</strong></h2><p>1.<a href="https://www.tslang.cn/docs/home.html" target="_blank" rel="external">https://www.tslang.cn/docs/home.html</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/02/11/浅探美团点评的模块化框架-Shield/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          浅探美团点评的模块化框架 Shield
        
      </div>
    </a>
  
  
    <a href="/2018/01/13/深入-Android-性能优化一：概要介绍/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">深入 Android 性能优化一：概要介绍</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  

  
  <! -- 添加捐赠图标 -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a>
        <span class="donate_txt">
           &uarr;<br>
		   左边支付宝打赏，右边微信打赏。
        </span>
        <br>
      </div>  
	<div id="donate_guide" class="donate_bar center hidden" >
		<!-- 支付宝打赏图案 -->
		<img src="http://7xt0ac.com1.z0.glb.clouddn.com/ZFB.png" alt="支付宝打赏"> 
		<!-- 微信打赏图案 -->
		<img src="http://7xt0ac.com1.z0.glb.clouddn.com/WX6.png" alt="微信打赏">  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			$('#donate_board').addClass('hidden');
			$('#donate_guide').removeClass('hidden');
		}
	</script>
</div>
<! -- 添加捐赠图标 -->



      <! -- 添加版权信息 -->
<div class="article-footer-copyright">
<left>本文由<b> <a href="/index.html" target="_blank" title="Iamasoldier6">Iamasoldier6</a> </b>创作和发表，采用<b>署名</b>-<b>非商用</b>-<b>禁止演绎 3.0 </b>国际许可协议进行许可。<br/></left>

<left>非商业转载请注明作者及出处，商业转载请联系作者本人。<br/>本文作者：<b><a href="/index.html" target="_blank" title="Iamasoldier6">Iamasoldier6</a></b><br/>本文标题：<b><a href="/2018/01/27/由-Java-引谈到-TypeScript/" target="_blank" title="由 Java 引谈到 TypeScript">由 Java 引谈到 TypeScript</a></b></left>

<left><br/>本文链接：<b><a href="/2018/01/27/由-Java-引谈到-TypeScript/" target="_blank" title="由 Java 引谈到 TypeScript">http://iamasoldier6.com/2018/01/27/由-Java-引谈到-TypeScript/</a></b></left>
</div>
<! -- 添加版权信息 -->
    
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>









</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 Iamasoldier6
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Iamasoldier6

          <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
          </script>
          本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次

      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="https://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-75799138-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>

<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?4548ab92471a76e452c9750997a514f8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  </div>
</body>
</html>