<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <title>Android Volley 研究综述（一） | Iamasoldier6&#39;s World</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Android 官网对 Volley 的一句话概括如下：

Volley is an HTTP library that makes networking for Android apps easier and most importantly,     faster.Volley 是一个 HTTP 库，能让 Android apps 的网络操作更容易，并且最重要的是，更快捷。">
<meta property="og:type" content="article">
<meta property="og:title" content="Android Volley 研究综述（一）">
<meta property="og:url" content="http://iamasoldier6.com/2016/04/30/Android-Volley-研究综述（一）/index.html">
<meta property="og:site_name" content="Iamasoldier6's World">
<meta property="og:description" content="Android 官网对 Volley 的一句话概括如下：

Volley is an HTTP library that makes networking for Android apps easier and most importantly,     faster.Volley 是一个 HTTP 库，能让 Android apps 的网络操作更容易，并且最重要的是，更快捷。">
<meta property="og:image" content="http://7xt0ac.com1.z0.glb.clouddn.com/as_jar_5.png">
<meta property="og:image" content="http://7xt0ac.com1.z0.glb.clouddn.com/as_jar_6.png">
<meta property="og:updated_time" content="2016-05-05T13:55:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Android Volley 研究综述（一）">
<meta name="twitter:description" content="Android 官网对 Volley 的一句话概括如下：

Volley is an HTTP library that makes networking for Android apps easier and most importantly,     faster.Volley 是一个 HTTP 库，能让 Android apps 的网络操作更容易，并且最重要的是，更快捷。">
<meta name="twitter:image" content="http://7xt0ac.com1.z0.glb.clouddn.com/as_jar_5.png">
  
    <link rel="alternative" href="/atom.xml" title="Iamasoldier6&#39;s World" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img lazy-src="http://7xt0ac.com1.z0.glb.clouddn.com/AR.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">Iamasoldier6</a></h1>
		</hgroup>

		
		<p class="header-subtitle">Forged from suffering, hardened by pain.</p>
		

		
			<div class="switch-btn">
				<div class="icon">
					<div class="icon-ctn">
						<div class="icon-wrap icon-house" data-idx="0">
							<div class="birdhouse"></div>
							<div class="birdhouse_holes"></div>
						</div>
						<div class="icon-wrap icon-ribbon hide" data-idx="1">
							<div class="ribbon"></div>
						</div>
						
						
					</div>
					
				</div>
				<div class="tips-box hide">
					<div class="tips-arrow"></div>
					<ul class="tips-inner">
						<li>菜单</li>
						<li>标签</li>
						
						
					</ul>
				</div>
			</div>
		

		<div class="switch-area">
			<div class="switch-wrap">
				<section class="switch-part switch-part1">
					<nav class="header-menu">
						<ul>
						
							<li><a href="/">主页</a></li>
				        
							<li><a href="/archives">归档</a></li>
				        
							<li><a href="/about">关于我</a></li>
				        
						</ul>
					</nav>
					<nav class="header-nav">
						<div class="social">
							
								<a class="github" target="_blank" href="https://github.com/Iamasoldier6" title="github">github</a>
					        
								<a class="weibo" target="_blank" href="http://weibo.com/2253797763/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
					        
								<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/Iamasoldier6" title="zhihu">zhihu</a>
					        
								<a class="facebook" target="_blank" href="https://www.facebook.com/profile.php?id=100004083648797" title="facebook">facebook</a>
					        
								<a class="google" target="_blank" href="https://plus.google.com/u/0/117011872816026464790" title="google">google</a>
					        
								<a class="twitter" target="_blank" href="https://twitter.com/Iamasoldier6" title="twitter">twitter</a>
					        
								<a class="rss" target="_blank" href="#" title="rss">rss</a>
					        
						</div>
					</nav>
				</section>
				
				
				<section class="switch-part switch-part2">
					<div class="widget tagcloud" id="js-tagcloud">
						<a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Mac/" style="font-size: 13.33px;">Mac</a> <a href="/tags/Source-Code/" style="font-size: 10px;">Source Code</a> <a href="/tags/Variety/" style="font-size: 10px;">Variety</a> <a href="/tags/Volley/" style="font-size: 16.67px;">Volley</a> <a href="/tags/adb/" style="font-size: 10px;">adb</a>
					</div>
				</section>
				
				
				

				
			</div>
		</div>
	</header>				
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"></div>
  		<h1 class="header-author js-mobile-header hide">Iamasoldier6</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
			
				<img lazy-src="http://7xt0ac.com1.z0.glb.clouddn.com/AR.jpg" class="js-avatar">
			
			</div>
			<hgroup>
			  <h1 class="header-author">Iamasoldier6</h1>
			</hgroup>
			
			<p class="header-subtitle">Forged from suffering, hardened by pain.</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">主页</a></li>
		        
					<li><a href="/archives">归档</a></li>
		        
					<li><a href="/about">关于我</a></li>
		        
		        <div class="clearfix"></div>
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/Iamasoldier6" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/2253797763/profile?topnav=1&wvr=6&is_all=1" title="weibo">weibo</a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/Iamasoldier6" title="zhihu">zhihu</a>
			        
						<a class="facebook" target="_blank" href="https://www.facebook.com/profile.php?id=100004083648797" title="facebook">facebook</a>
			        
						<a class="google" target="_blank" href="https://plus.google.com/u/0/117011872816026464790" title="google">google</a>
			        
						<a class="twitter" target="_blank" href="https://twitter.com/Iamasoldier6" title="twitter">twitter</a>
			        
						<a class="rss" target="_blank" href="#" title="rss">rss</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap"><article id="post-Android-Volley-研究综述（一）" class="article article-type-post" itemscope itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2016/04/30/Android-Volley-研究综述（一）/" class="article-date">
  	<time datetime="2016-04-30T12:17:59.000Z" itemprop="datePublished">2016-04-30</time>
</a>
    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Android Volley 研究综述（一）
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        
	<div class="article-tag tagcloud">
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac/">Mac</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Volley/">Volley</a></li></ul>
	</div>

        

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
        
  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#一-Volley-的简介"><span class="toc-number">1.</span> <span class="toc-text">一. Volley 的简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#二-Volley-的准备"><span class="toc-number">2.</span> <span class="toc-text">二. Volley 的准备</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#三-StringRequest-的使用"><span class="toc-number">3.</span> <span class="toc-text">三. StringRequest 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#四-JsonRequest-的使用"><span class="toc-number">4.</span> <span class="toc-text">四. JsonRequest 的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文献"><span class="toc-number">5.</span> <span class="toc-text">参考文献</span></a></li></ol>
  </div>

        <p>Android 官网对 Volley 的一句话概括如下：</p>
<blockquote>
<p>Volley is an HTTP library that makes networking for Android apps easier and most importantly,     faster.<br>Volley 是一个 HTTP 库，能让 Android apps 的网络操作更容易，并且最重要的是，更快捷。<a id="more"></a></p>
</blockquote>
<h2 id="一-Volley-的简介"><a href="#一-Volley-的简介" class="headerlink" title="一. Volley 的简介"></a><strong>一. Volley 的简介</strong></h2><p>Volley 于 2013 年 Google I/O 大会上推出，是一种新式的网络通信框架，具有以下优点：</p>
<ul>
<li>网络请求的自动调度。</li>
<li>多并发网络连接。</li>
<li>使用标准 HTTP 缓存连贯性来缓存透明的磁盘和内存响应。</li>
<li>支持请求优先级。</li>
<li>取消请求 API 。你可以取消一个单一请求，或者你可以取消请求的某些区域。</li>
<li>易于定制，例如，定制重试和回退功能。</li>
<li>强大的指令，使得异步加载网络数据，且正确地显示到 UI 更加简单。</li>
<li>调试与追踪工具。</li>
</ul>
<p>Volley 擅长用来显示 UI 的 RPC (远程过程调用协议) 类型的操作，如获取作为构造性数据的一页搜索结果。它轻松地整合了任何协议，同时输出支持的数据，如原始的字符串，图片和 JSON 。通过提供内置的支持你需要的特性，Volley 使你免于去写样板代码，让你将关注点放在你的 app 的功能逻辑上。</p>
<p><strong>Volley 不适合大的数据文件的下载或者大数据量的操作，是由于 Volley 需要保持解析时内存里的所有响应。</strong></p>
<p>以上简介来自官网，总的来说，Volley 既可以像 AsyncHttpClient 一样简单地进行 HTTP 通信，也可以像 Universal-Image-Loader 一样轻松地加载网络图片。Volley 非常适合进行数据量不大，但通信频繁的网络操作，而对于大数据量的网络操作，如下载文件，Volley 的表现就不敢恭维了。</p>
<h2 id="二-Volley-的准备"><a href="#二-Volley-的准备" class="headerlink" title="二. Volley 的准备"></a><strong>二. Volley 的准备</strong></h2><p>首先，电脑上最好得装有 Git ，具体安装方法因操作系统各异，自行 Google ，推荐梯子<a href="http://www.meiyouvpn.top/promote/1335" target="_blank" rel="external">美游 VPN </a>，用了半年了，还不错。好，下载 Volley 源码：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://android.googlesource.com/platform/frameworks/volley</span><br></pre></td></tr></table></figure>
<p>下载完成后，在 /volley/build/intermediates/bundles/debug 里找到 classes.jar ，就是我们要的 jar 包了，拷贝一份出来，重命名成 volley.jar ，再使用 Android Studio 新建一个 Android 项目，将 volley.jar 文件添加到 libs 目录下，如图：</p>
<p><img src="http://7xt0ac.com1.z0.glb.clouddn.com/as_jar_5.png" alt=""></p>
<p>然后，鼠标左击选中 volley.jar ，再右击会出现一长串菜单，下拉找到 Add As Library 并单击，再 OK ，等待 Gradle build 。完事后，再选中项目，比如我的 VolleyDemo ，右击后下拉菜单，找到 Open Module Settings 并单击，出现如图：</p>
<p><img src="http://7xt0ac.com1.z0.glb.clouddn.com/as_jar_6.png" alt=""></p>
<p>看到 Volley 已在 Dependencies 中，点击右下角 OK ，完事，这样准备工作就完成了。</p>
<h2 id="三-StringRequest-的使用"><a href="#三-StringRequest-的使用" class="headerlink" title="三. StringRequest 的使用"></a><strong>三. StringRequest 的使用</strong></h2><p>StringRequestDemo 地址: <a href="https://github.com/Iamasoldier6/AndroidExerciseDemos" target="_blank" rel="external"> GitHub </a>，只有 Get 请求的使用，POST 请求的使用，类比即可。</p>
<p>从最基本的 HTTP 通信开始学习，即发起一条 HTTP 请求，然后接收 HTTP 响应。Android Studio 新建一个StringRequestDemo 项目，其他全部默认，一路 Next 到底，最后 Done。思路如下：</p>
<p>首先，在 MainActivity 的 onCreate() 方法里，需要获取到一个 RequestQueue 对象：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RequestQueue <span class="built_in">queue</span> = Volley.newRequestQueue(<span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>
<p>这里的 RequestQueue 是一个请求队列对象，它可以缓存所有的 HTTP 请求，然后以一定的算法并发地发出这些请求。RequestQueue 内部的设计非常适合高并发，因此，不必为每一次的 HTTP 请求都创建一个 RequestQueue 对象，在每个需要和网络交互的 Activity 中创建一个 RequestQueue 对象基本足够。</p>
<p>其次，为了要发出一条 HTTP 请求，再创建一个 StringRequest 对象：</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> url = <span class="string">"http://www.google.com"</span>;</span><br><span class="line"></span><br><span class="line">StringRequest stringRequest = <span class="keyword">new</span> StringRequest(url,</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">Response</span>.Listener&lt;<span class="built_in">String</span>&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> void onResponse(<span class="built_in">String</span> <span class="built_in">response</span>) &#123;</span><br><span class="line">                <span class="built_in">Log</span>.d(<span class="string">"TAG"</span>, <span class="built_in">response</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="keyword">new</span> <span class="built_in">Response</span>.ErrorListener() &#123;</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    <span class="keyword">public</span> void onErrorResponse(VolleyError <span class="keyword">error</span>) &#123;</span><br><span class="line">        <span class="built_in">Log</span>.e(<span class="string">"TAG"</span>, <span class="keyword">error</span>.getMessage(), <span class="keyword">error</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>这里 new 出一个 StringRequest 对象，StringRequest() 方法中传入了三个参数，第一个是目标服务器的 URL 地址，第二个是服务器响应成功的回调，第三个是服务器响应失败的回调。具体来说，目标服务器地址填的是 Google 的首页（需要翻墙），然后，在响应成功的回调里，打印出服务器返回的内容；在响应失败的回调里，打印出失败的详细信息。</p>
<p>最后，将该 StringRequest 对象添加到 RequestQueue 里面即可：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">queue</span>.add(stringRequest);</span><br></pre></td></tr></table></figure>
<p>另外，Volley 要访问网络，在 AndroidManifest.xml 文件中添加一条权限：</p>
<figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;uses-permission android:<span class="built_in">name</span>=<span class="string">"android.permission.INTERNET"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>运行程序，发出该 HTTP 请求，Logcat 中部分打印数据如下（代码区域可左右拖动）：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype html&gt;</span><span class="tag">&lt;<span class="name">html</span> <span class="attr">itemscope</span>=<span class="string">""</span> <span class="attr">itemtype</span>=<span class="string">"http://schema.org/WebPage"</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"width=device-width,minimum-scale=1.0"</span> <span class="attr">name</span>=<span class="string">"viewport"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"Search the world's information, including webpages, images, videos and more. Google has many special features to help you find exactly what you're looking for."</span> <span class="attr">name</span>=<span class="string">"description"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"noodp"</span> <span class="attr">name</span>=<span class="string">"robots"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"/logos/doodles/2016/hertha-marks-ayrtons-162nd-birthday-6049205031272448-hp.jpg"</span> <span class="attr">itemprop</span>=<span class="string">"image"</span>&gt;</span><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"/images/branding/product/ico/googleg_lodp.ico"</span> <span class="attr">rel</span>=<span class="string">"shortcut icon"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"Hertha Marks Ayrton&amp;#8217;s 162nd birthday #GoogleDoodle"</span> <span class="attr">property</span>=<span class="string">"og:description"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"http://www.google.com/logos/doodles/2016/hertha-marks-ayrtons-162nd-birthday-6049205031272448-thp.png"</span> <span class="attr">property</span>=<span class="string">"og:image"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"500"</span> <span class="attr">property</span>=<span class="string">"og:image:width"</span>&gt;</span><span class="tag">&lt;<span class="name">meta</span> <span class="attr">content</span>=<span class="string">"200"</span> <span class="attr">property</span>=<span class="string">"</span></span></span><br></pre></td></tr></table></figure>
<p>Google 返回的就是这一长串 HTML 代码，浏览器可以轻松地将这段 HTML 代码解析，然后将 Google 首页展现出来。如此，最基本的 HTTP 发送与响应的功能就完成了。代码量不多，其实，主要分以下三步：</p>
<ul>
<li>创建一个 RequestQueue 对象。</li>
<li>创建一个 StringRequest 对象。</li>
<li>将 StringRequest 对象添加到 RequestQueue 里面。</li>
</ul>
<p>以上，使用的只是 GET 请求，不过 HTTP 的请求类型通常有 GET 和 POST ，要发出一条 POST 请求，则思路如下：</p>
<p>事实上，StringRequest 中也提供了一种四个参数的构造函数，其中第一个参数即指定了请求类型，如下：</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">StringRequest stringRequest = <span class="keyword">new</span> StringRequest(<span class="function"><span class="keyword">Method</span>.<span class="title">POST</span>, <span class="title">url</span>, <span class="title">listener</span>, <span class="title">errorListener</span>);</span></span><br></pre></td></tr></table></figure>
<p>但是需要明确的是，StringRequest 中并没有提供设置 POST 参数的方法，然而，当发出 POST 请求时，Volley 会尝试调用 StringRequest 的父类即 Request 中的 getParams() 方法来获取 POST 参数，故只需要在 StringRequest 的匿名类中重写 getParams() 方法，于此设置 POST 参数即可，具体如下：</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">StringRequest stringRequest = <span class="literal">new</span> StringRequest(Method.POST, url, listener, errorListener) &#123;</span><br><span class="line"></span><br><span class="line">	@Override</span><br><span class="line">	<span class="keyword">protected</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; getParams() throws AuthFailureError &#123;</span><br><span class="line">		<span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt; <span class="built_in">map</span> = <span class="literal">new</span> HashMap&lt;<span class="built_in">String</span>, <span class="built_in">String</span>&gt;();</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"params1"</span>, <span class="string">"value1"</span>);</span><br><span class="line">		<span class="built_in">map</span>.put(<span class="string">"params2"</span>, <span class="string">"value2"</span>);</span><br><span class="line">		<span class="keyword">return</span> <span class="built_in">map</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>虽然没有设置 POST 参数的方法，但是由于 Volley 开源，可以自由地添加和修改，定制出所需的 Volley 版本。</p>
<h2 id="四-JsonRequest-的使用"><a href="#四-JsonRequest-的使用" class="headerlink" title="四. JsonRequest 的使用"></a><strong>四. JsonRequest 的使用</strong></h2><p>JsonRequestDemo 地址: <a href="https://github.com/Iamasoldier6/AndroidExerciseDemos" target="_blank" rel="external"> GitHub </a>，只有 JsonObjectRequest 的使用，JsonArrayObject 的使用，类比即可。</p>
<p>同 StringRequest 一样，JsonRequest 也是继承于 Request 类，但是，JsonRequest 是一个抽象类，无法直接创建实例，得从子类入手。其有两个直接的子类，JsonObjectRequest (用于请求一段 JSON 数据) 和 JsonArrayRequest (用于请求一段JSON 数组) 。具体如下：</p>
<p>第一步同上述 StringRequest 的第一步一样。</p>
<p>然后，再 new 出一个 JsonObjectRequest 对象：</p>
<figure class="highlight vbscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> url = <span class="string">"http://www.weather.com.cn/data/sk/101010100.html"</span>;</span><br><span class="line"></span><br><span class="line">JsonObjectRequest jsonObjectRequest = <span class="keyword">new</span> JsonObjectRequest(url, <span class="literal">null</span>,</span><br><span class="line">        <span class="keyword">new</span> <span class="built_in">Response</span>.Listener&lt;JSONObject&gt;() &#123;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            <span class="keyword">public</span> void onResponse(JSONObject <span class="built_in">response</span>) &#123;</span><br><span class="line">                <span class="built_in">Log</span>.d(<span class="string">"TAG"</span>, <span class="built_in">response</span>.toString());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, <span class="keyword">new</span> <span class="built_in">Response</span>.ErrorListener() &#123;</span><br><span class="line"></span><br><span class="line">   @Override</span><br><span class="line">   <span class="keyword">public</span> void onErrorResponse(VolleyError <span class="keyword">error</span>) &#123;</span><br><span class="line">       <span class="built_in">Log</span>.e(<span class="string">"TAG"</span>, <span class="keyword">error</span>.getMessage(), <span class="keyword">error</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>最后，类比 StringRequest ，将 JsonObjectRequest 对象添加到 RequestQueue 里面：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">queue</span>.add(jsonObjectRequest);</span><br></pre></td></tr></table></figure>
<p>同时，不要忘了在 AndroidManifest.xml 文件中添加同上面一样的权限。</p>
<p>上面的 URL 地址是一个查询天气信息的接口，响应的数据是以 JSON 格式返回的，这样，HTTP 通信完成后，服务器响应的天气信息回调到 onResponse() 方法中，在 Logcat 中打印出数据如下（代码区域可左右拖动）：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"weatherinfo"</span>:&#123;<span class="attr">"city"</span>:<span class="string">"北京"</span>,<span class="attr">"cityid"</span>:<span class="string">"101010100"</span>,<span class="attr">"temp"</span>:<span class="string">"18"</span>,<span class="attr">"WD"</span>:<span class="string">"东南风"</span>,<span class="attr">"WS"</span>:<span class="string">"1级"</span>,<span class="attr">"SD"</span>:<span class="string">"17%"</span>,<span class="attr">"WSE"</span>:<span class="string">"1"</span>,<span class="attr">"time"</span>:<span class="string">"17:05"</span>,<span class="attr">"isRadar"</span>:<span class="string">"1"</span>,<span class="attr">"Radar"</span>:<span class="string">"JC_RADAR_AZ9010_JB"</span>,<span class="attr">"njd"</span>:<span class="string">"暂无实况"</span>,<span class="attr">"qy"</span>:<span class="string">"1011"</span>,<span class="attr">"rain"</span>:<span class="string">"0"</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<p>如此，根据实际需求，从 JSONObject 对象中取出需要的数据即可。</p>
<p>总结来说，StringRequest, JsonObjectRequest 和 JsonArrayRequest 的用法基本一致，关于 Android Volley 研究综述（一）到此结束，（二）未完待续。<br><br></p>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a><strong>参考文献</strong></h2><p>1.<a href="http://developer.android.com/training/volley/index.html" target="_blank" rel="external">http://developer.android.com/training/volley/index.html</a></p>
<p>2.<a href="http://developer.android.com/training/volley/request.html" target="_blank" rel="external">http://developer.android.com/training/volley/request.html</a></p>
<p>3.<a href="http://blog.csdn.net/guolin_blog/article/details/17482095" target="_blank" rel="external">http://blog.csdn.net/guolin_blog/article/details/17482095</a></p>

      
    </div>
    
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/05/04/Android-Volley-研究综述（二）/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption"><</strong>
      <div class="article-nav-title">
        
          Android Volley 研究综述（二）
        
      </div>
    </a>
  
  
    <a href="/2016/04/14/半月技术谈/" id="article-nav-older" class="article-nav-link-wrap">
      <div class="article-nav-title">半月技术谈</div>
      <strong class="article-nav-caption">></strong>
    </a>
  
</nav>

  

  
  <! -- 添加捐赠图标 -->
<div class ="post-donate">
    <div id="donate_board" class="donate_bar center">
        <a id="btn_donate" class="btn_donate" href="javascript:;" title="打赏"></a>
        <span class="donate_txt">
           &uarr;<br>
		   博主沥血作文章，客官随性打钱赏。左边支付宝打赏，右边微信打赏。
        </span>
        <br>
      </div>  
	<div id="donate_guide" class="donate_bar center hidden" >
		<!-- 支付宝打赏图案 -->
		<img src="http://7xt0ac.com1.z0.glb.clouddn.com/ZFB.png" alt="支付宝打赏"> 
		<!-- 微信打赏图案 -->
		<img src="http://7xt0ac.com1.z0.glb.clouddn.com/WX6.png" alt="微信打赏">  
    </div>
	<script type="text/javascript">
		document.getElementById('btn_donate').onclick = function(){
			$('#donate_board').addClass('hidden');
			$('#donate_guide').removeClass('hidden');
		}
	</script>
</div>
<! -- 添加捐赠图标 -->



      <! -- 添加版权信息 -->
<div class="article-footer-copyright">
<left>本文由<b><a href="/index.html" target="_blank" title="Iamasoldier6">Iamasoldier6</a></b>创作和发表，采用<b>署名</b>-<b>非商用</b>-<b>禁止演绎 3.0 </b>国际许可协议进行许可。<br/></left>

<left>非商业转载请注明作者及出处，商业转载请联系作者本人。<br/>本文作者：<b><a href="/index.html" target="_blank" title="Iamasoldier6">Iamasoldier6</a></b><br/>本文标题：<b><a href="/2016/04/30/Android-Volley-研究综述（一）/" target="_blank" title="Android Volley 研究综述（一）">Android Volley 研究综述（一）</a></b></left>

<left><br/>本文链接：<b><a href="/2016/04/30/Android-Volley-研究综述（一）/" target="_blank" title="Android Volley 研究综述（一）">http://iamasoldier6.com/2016/04/30/Android-Volley-研究综述（一）/</a></b>.</left>
</div>
<! -- 添加版权信息 -->
    
</article>


<div class="share_jia">
	<!-- JiaThis Button BEGIN -->
	<div class="jiathis_style">
		<span class="jiathis_txt">分享到: &nbsp; </span>
		<a class="jiathis_button_facebook"></a> 
    <a class="jiathis_button_twitter"></a>
    <a class="jiathis_button_plus"></a> 
    <a class="jiathis_button_tsina"></a>
		<a class="jiathis_button_cqq"></a>
		<a class="jiathis_button_douban"></a>
		<a class="jiathis_button_weixin"></a>
		<a class="jiathis_button_tumblr"></a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	</div>
	<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1405949716054953" charset="utf-8"></script>
	<!-- JiaThis Button END -->
</div>






<div class="duoshuo">
	<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="Android-Volley-研究综述（一）" data-title="Android Volley 研究综述（一）" data-url="http://iamasoldier6.com/2016/04/30/Android-Volley-研究综述（一）/"></div>
	<!-- 多说评论框 end -->
	<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"iamasoldier6"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
	<!-- 多说公共JS代码 end -->
</div>






</div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2016 Iamasoldier6
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Iamasoldier6

          <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
          </script>
          本站总访问量<span id="busuanzi_value_site_pv"></span>次，本站访客数<span id="busuanzi_value_site_uv"></span>人次，本文总阅读量<span id="busuanzi_value_page_pv"></span>次

      	</div>
    </div>
  </div>
</footer>
    </div>
    
  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">


<script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: true,
		animate: true,
		isHome: false,
		isPost: true,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false
	}
</script>
<script src="http://7.url.cn/edu/jslib/comb/require-2.1.6,jquery-1.9.1.min.js"></script>
<script src="/js/main.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-75799138-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->




<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    }
});

MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
        all[i].SourceElement().parentNode.className += ' has-jax';                 
    }       
});
</script>

<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



<div id="totop" style="position:fixed;bottom:150px;right:50px;cursor: pointer;">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>
<script src="/js/totop.js"></script>
  </div>
</body>
</html>